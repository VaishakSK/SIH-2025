<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Users - CivicSense Admin</title>
  <style>
    :root{ --bg-1:#0f172a; --muted:#94a3b8; --border:rgba(15,23,42,0.08) }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Helvetica,Arial;background:
      radial-gradient(1200px 400px at 10% 10%, rgba(6,182,212,0.04), transparent),
      linear-gradient(180deg,#f5f7fb,#eef2f6);color:var(--bg-1)}
    .wrap{padding:20px}
    .panel{padding:16px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.98),#fff);box-shadow:0 12px 30px rgba(2,6,23,0.04);border:1px solid var(--border)}
    .header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .sub{color:var(--muted);font-size:13px}
    table{width:100%;border-collapse:separate;border-spacing:0 8px}
    th{text-align:left;color:var(--muted);font-size:12px}
    td{background:#fff;border:1px solid var(--border);padding:10px;border-left:none;border-right:none}
    tr td:first-child{border-left:1px solid var(--border);border-top-left-radius:10px;border-bottom-left-radius:10px}
    tr td:last-child{border-right:1px solid var(--border);border-top-right-radius:10px;border-bottom-right-radius:10px}
    .badge{padding:6px 10px;border-radius:999px;background:#ecfeff;color:#0369a1;font-weight:800;font-size:12px}
    .btn{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:#fff;cursor:pointer}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <div class="header">
        <div>
          <h2 style="margin:0">Users</h2>
          <div class="sub">Manage administrators and citizens</div>
        </div>
      </div>
      <table aria-label="Users table">
        <thead>
          <tr>
            <th>Username</th>
            <th>Email</th>
            <th>Joined</th>
            <th>Role</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {{#if users}}
            {{#each users}}
              <tr>
                <td>{{this.username}}</td>
                <td>{{this.email}}</td>
                <td>{{this.createdAt}}</td>
                <td>
                  {{#if this.isAdmin}}<span class="badge">Admin</span>{{else}}User{{/if}}
                </td>
                <td>
                  <form method="post" action="/admin/users/{{this._id}}/toggle-admin" style="margin:0">
                    <button class="btn" type="submit">{{#if this.isAdmin}}Revoke admin{{else}}Make admin{{/if}}</button>
                  </form>
                </td>
              </tr>
            {{/each}}
          {{else}}
            <tr><td colspan="5" class="sub">No users found.</td></tr>
          {{/if}}
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>


